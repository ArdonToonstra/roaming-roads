# Dockerfile for CMS development with hot reloading
FROM node:20-alpine

# Install pnpm globally for faster installs
RUN npm install -g pnpm@latest

# Set working directory
WORKDIR /home/node/app

# Ensure the directory is owned by the node user
RUN chown -R node:node /home/node/app

# Switch to non-root user
USER node

# Expose port
EXPOSE 3000

# Use the entrypoint script (will be mounted from host)
ENTRYPOINT ["./scripts/docker-entrypoint.sh"]